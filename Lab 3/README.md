# Техническая документация

## Приложение для обработки изображений

---

### 1. Архитектура приложения

#### 1.1 Общее описание
Приложение разработано с использованием Flask для серверной части и HTML/CSS для интерфейса. Оно позволяет загружать изображения, выбирать метод обработки и отображать результат.

#### 1.2 Основные компоненты
- **Flask-сервер**: Обрабатывает запросы, выполняет алгоритмы обработки изображений.
- **HTML/CSS/Bootstrap**: Формирует пользовательский интерфейс.
- **OpenCV**: Реализует алгоритмы обработки изображений.

---

### 2. Технологии и библиотеки

#### 2.1 Основные технологии
- **Flask**: Серверная часть приложения.
- **HTML5**: Разметка пользовательского интерфейса.
- **CSS**: Оформление интерфейса.
- **Bootstrap**: Для стилизации форм и кнопок.
- **OpenCV**: Выполнение алгоритмов обработки изображений.
- **NumPy**: Математические вычисления для обработки пиксельных данных.

#### 2.2 Внешние библиотеки
- Flask
- OpenCV
- NumPy

---

### 3. Структура кода

#### 3.1 Основные файлы
1. **app.py**: Главный файл приложения, который управляет маршрутизацией и обработкой запросов.
2. **templates/index.html**: Страница загрузки изображений и выбора методов обработки.
3. **templates/result.html**: Страница отображения результатов обработки.
4. **static/**: Папка для хранения обработанных изображений.

#### 3.2 Основные функции
1. **load_image(path)**: Загружает изображение с диска.
2. **save_image(image, path)**: Сохраняет обработанное изображение.
3. **equalize_hist_rgb(image)**: Выполняет эквализацию гистограммы для каналов RGB.
4. **equalize_hist_hsv(image)**: Выполняет эквализацию по компоненте яркости в HSV.
5. **linear_contrast(image)**: Линейное контрастирование.
6. **gaussian_blur(image, kernel_size)**: Применяет гауссово размытие.
7. **average_blur(image, kernel_size)**: Применяет среднее размытие.
8. **median_blur(image, kernel_size)**: Применяет медианное размытие.

---

### 4. Пользовательский интерфейс

#### 4.1 Входные данные
- Загружаемое изображение (форматы: JPEG, PNG).
- Выбранный метод обработки.
- Размер ядра (опционально, для методов размытия).

#### 4.2 Выходные данные
- Отображение оригинального изображения.
- Результат обработки.

#### 4.3 Пример интерфейса
1. **Форма загрузки изображения**: Поле для выбора файла и выбора метода обработки.
2. **Кнопка обработки**: Отправляет запрос к серверу.
3. **Результат**: Отображает оригинал и обработанное изображение.

---

### 5. Основные алгоритмы

#### 5.1 Эквализация гистограммы (RGB)
```python
def equalize_hist_rgb(image):
    channels = cv2.split(image)
    eq_channels = [cv2.equalizeHist(ch) for ch in channels]
    return cv2.merge(eq_channels)
#### 5.2 Линейное контрастирование
    def linear_contrast(image):
    min_val = np.min(image)
    max_val = np.max(image)
    result = ((image - min_val) / (max_val - min_val) * 255).astype(np.uint8)
    return result
#### 5.3 Гауссово размытие
    def gaussian_blur(image, kernel_size=5):
    return cv2.GaussianBlur(image, (kernel_size, kernel_size), 0)
    ### 6. Взаимодействие сервер-клиент

#### 6.1 Формат данных

1. **Входные данные**
   - Формат: `multipart/form-data`
   - Поля:
     - `image`: Файл изображения.
     - `method`: Метод обработки.
     - `kernel_size`: Размер ядра (по умолчанию 5).

2. **Выходные данные**
   - HTML-страница с путями к оригинальному и обработанному изображениям.

---

### 7. Оптимизация производительности

#### 7.1 Методы оптимизации
- Минимизация операций с пикселями при обработке изображений.
- Использование оптимизированных функций OpenCV.
- Кэширование обработанных изображений.

#### 7.2 Рекомендации
- Ограничение максимального размера загружаемых файлов.
- Оптимизация форматов изображений для ускорения обработки.

---

### 8. Тестирование

#### 8.1 Модульные тесты
- Проверка корректности алгоритмов обработки изображений.
- Тестирование загрузки и сохранения файлов.

#### 8.2 Нагрузочное тестирование
- Обработка больших изображений (размеры до 4K).
- Тестирование с параллельными запросами.
